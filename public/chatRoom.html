<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width,initial-scale = 1.0">
    <title>CHAT ROOM</title>
    <meta name="description" content="12345">
    <link rel="stylesheet" href="/stylesheets/chatRoom.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <button id="shareButton" onclick="share(this)">
    <i class="fas fa-share-alt"></i>
    <i class="fas fa-times"></i>
    <div class="container">
      <div class="addthis_inline_share_toolbox"></div>
      
      <!--for old users of AddThis-->
      <div class="addthis_sharing_toolbox"></div>
    </div>
  </button>






    <p id='server-time'></p>
    <p id='message_display'></p>

    <form class="" action="javascript:void(0)">
        <input type="text" id="message_input" name="" value="" required autofocus><button>Send</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>;
    <script>
        var socket = io();
        var el = document.getElementById('server-time');
        var dis = document.getElementById('message_display');
        socket.on('time', function(timeString) {
            el.innerHTML = 'Server time: ' + timeString;
        });
        socket.on('message', function(msg) {
            dis.innerHTML += `${name} Message: ${msg} <br />`;
        });
        document.forms[0].onsubmit = function() {
            var input = document.getElementById("message_input");
            var msg = input.value;
            socket.emit("chat", msg);
            input.value = '';
        }

        var AddThisJSLoaded = false; //AddThis not loaded yet
        var clickedOnShare = false; //share button is not clicked

        //replace with your publisher ID
        //it's in your profile setting
        var AddThisPubID = "ra-5b056b31a239b6eb";
        var AddThisJS =
            "//s7.addthis.com/js/300/addthis_widget.js#pubid=" + AddThisPubID;

        function share(button) {
            if (navigator.share) {
                //check if Web Share API is supported by the browser
                url: 'https://murmuring-castle-23474.herokuapp.com/#t3'
                var title = document.getElementsByTagName("title")[0].innerHTML;
                var description = document
                    .querySelector("meta[name=description]")
                    .getAttribute("content");

                navigator.share({
                    title: title,
                    text: description,
                    url: url
                });
            }
            else {
                if (!AddThisJSLoaded && !clickedOnShare) {
                    //when AddThis not loaded and share button isn't clicked
                    clickedOnShare = true; //share button is clicked
                    showLoading(button);
                    shareByAddThis(button);
                } else {
                    toggleAddThisButtons(button);
                }
            }
        }

        function shareByAddThis(button) {
            var script = document.createElement("script");
            script.async = true;
            script.src = AddThisJS;

            script.onload = function() {
                clickedOnShare = false; //AddThis JS is loaded
                addthis.user.ready(function(data) {
                    AddThisJSLoaded = true; //AddThis loaded and ready to use
                    hideLoading(button);
                    showAddThisButtons(button);
                });
            };

            script.onerror = function() {
                clickedOnShare = false; //AddThis JS failed to load
                hideLoading(button);
            };

            document.body.appendChild(script);
        }

        function showLoading(button) {
            button.classList.add("loading");
        }

        function hideLoading(button) {
            button.classList.remove("loading");
        }

        function showAddThisButtons(button) {
            button.classList.add("showAddThisButtons");
        }

        function toggleAddThisButtons(button) {
            button.classList.toggle("showAddThisButtons");
        }
    </script>

</html>